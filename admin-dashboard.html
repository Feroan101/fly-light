<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Badminton Admin - Complete Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary: #10b981;
      --primary-dark: #059669;
      --danger: #ef4444;
      --warning: #f59e0b;
    }
    body { font-family: 'Inter', sans-serif; background: #f8fafc; }
    .sidebar { 
      background: white; 
      height: 100vh; 
      position: fixed; 
      width: 280px; 
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      z-index: 1000;
      overflow-y: auto;
    }
    .sidebar .nav-link { 
      color: #64748b; 
      padding: 12px 24px; 
      border-left: 4px solid transparent;
      transition: all 0.3s;
    }
    .sidebar .nav-link.active, .sidebar .nav-link:hover {
      background: #f1f5f9;
      color: var(--primary);
      border-left-color: var(--primary);
    }
    .content { margin-left: 280px; padding: 24px; }
    .card { box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: none; }
    .stats-card { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; }
    .form-control, .form-select { border: 1px solid #e2e8f0; border-radius: 8px; }
    .form-control:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(16,185,129,0.1); }
    .btn-primary { background: var(--primary); border: none; border-radius: 8px; }
    .btn-primary:hover { background: var(--primary-dark); }
    .table { background: white; border-radius: 12px; overflow: hidden; }
    .table thead th { background: #f8fafc; border: none; font-weight: 600; }
    .payment-status.paid { color: #10b981; font-weight: 600; }
    .payment-status.pending { color: #f59e0b; font-weight: 600; }
    .order-status { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 600; }
    .status-pending { background: #fef3c7; color: #92400e; }
    .status-processing { background: #dbeafe; color: #1e40af; }
    .status-shipped { background: #dcfce7; color: #166534; }
    .status-delivered { background: #f0f9ff; color: #0e7490; }
    .product-image { width: 60px; height: 60px; object-fit: cover; border-radius: 6px; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar d-flex flex-column">
    <div class="p-4 border-bottom">
      <h4 class="mb-0 fw-bold text-dark"><i class="fas fa-shuttle-space me-2"></i>Badminton Admin</h4>
    </div>
    <nav class="nav flex-column mt-4">
      <a class="nav-link active" href="#dashboard" onclick="showSection('dashboard')">
        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
      </a>
      <a class="nav-link" href="#players" onclick="showSection('players')">
        <i class="fas fa-users me-2"></i>Players
      </a>
      <a class="nav-link" href="#tournaments" onclick="showSection('tournaments')">
        <i class="fas fa-trophy me-2"></i>Tournaments
      </a>
      <a class="nav-link" href="#payments" onclick="showSection('payments')">
        <i class="fas fa-credit-card me-2"></i>Tournament Payments
      </a>
      <a class="nav-link" href="#products" onclick="showSection('products')">
        <i class="fas fa-box me-2"></i>Products
      </a>
      <a class="nav-link" href="#orders" onclick="showSection('orders')">
        <i class="fas fa-shopping-cart me-2"></i>Orders
      </a>
      <a class="nav-link" href="#inventory" onclick="showSection('inventory')">
        <i class="fas fa-warehouse me-2"></i>Inventory
      </a>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="content">
    <!-- Dashboard -->
    <section id="dashboard" class="section active">
      <div class="row mb-4">
        <div class="col-12">
          <h2 class="fw-bold mb-1">Admin Dashboard</h2>
          <p class="text-muted mb-0">Manage tournaments & e-commerce</p>
        </div>
      </div>
      
      <!-- Stats Cards -->
      <div class="row mb-5">
        <div class="col-md-2 mb-4">
          <div class="card stats-card p-4 text-center">
            <h3 class="mb-1" id="totalPlayers">0</h3>
            <p class="mb-0 opacity-75">Players</p>
          </div>
        </div>
        <div class="col-md-2 mb-4">
          <div class="card stats-card p-4 text-center bg-warning text-dark">
            <h3 class="mb-1" id="pendingPayments">0</h3>
            <p class="mb-0 opacity-75">Pending Payments</p>
          </div>
        </div>
        <div class="col-md-2 mb-4">
          <div class="card stats-card p-4 text-center bg-success">
            <h3 class="mb-1" id="totalRevenue">$0</h3>
            <p class="mb-0 opacity-75">E-comm Revenue</p>
          </div>
        </div>
        <div class="col-md-2 mb-4">
          <div class="card stats-card p-4 text-center bg-info">
            <h3 class="mb-1" id="totalOrders">0</h3>
            <p class="mb-0 opacity-75">Total Orders</p>
          </div>
        </div>
        <div class="col-md-2 mb-4">
          <div class="card stats-card p-4 text-center bg-purple">
            <h3 class="mb-1" id="lowStock">0</h3>
            <p class="mb-0 opacity-75">Low Stock</p>
          </div>
        </div>
        <div class="col-md-2 mb-4">
          <div class="card stats-card p-4 text-center bg-danger">
            <h3 class="mb-1" id="activeTournaments">0</h3>
            <p class="mb-0 opacity-75">Tournaments</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Players Section (unchanged) -->
    <section id="players" class="section">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold mb-0">Player Management</h2>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addPlayerModal">
          <i class="fas fa-plus me-2"></i>Add Player
        </button>
      </div>
      <!-- Same player table as before -->
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead><tr><th>ID</th><th>Name</th><th>Phone</th><th>Email</th><th>Category</th><th>Payment</th><th>Actions</th></tr></thead>
              <tbody id="playersTable"><tr><td colspan="7" class="text-center text-muted">No players registered</td></tr></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="section">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold mb-0">Products</h2>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal">
          <i class="fas fa-plus me-2"></i>Add Product
        </button>
      </div>
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr><th>Image</th><th>Name</th><th>Price</th><th>Stock</th><th>Category</th><th>Sold</th><th>Actions</th></tr>
              </thead>
              <tbody id="productsTable">
                <tr><td colspan="7" class="text-center text-muted">No products</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Orders Section -->
    <section id="orders" class="section">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold mb-0">Orders</h2>
        <button class="btn btn-success" onclick="exportOrders()">Export CSV</button>
      </div>
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr><th>ID</th><th>Customer</th><th>Total</th><th>Status</th><th>Date</th><th>Actions</th></tr>
              </thead>
              <tbody id="ordersTable">
                <tr><td colspan="6" class="text-center text-muted">No orders</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Inventory Section -->
    <section id="inventory" class="section">
      <h2 class="fw-bold mb-4">Inventory Management</h2>
      <div class="row" id="inventoryList">
        <div class="col-12">
          <div class="card">
            <div class="card-body text-center py-5">
              <i class="fas fa-warehouse fa-3x text-muted mb-3"></i>
              <p class="text-muted">No low stock alerts</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Other sections (tournaments, payments) remain the same -->
  </div>

  <!-- Modals -->
  <!-- Add Player Modal (same as before) -->
  <!-- Add Product Modal -->
  <div class="modal fade" id="addProductModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Product</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="productForm">
            <div class="mb-3">
              <label class="form-label">Product Name *</label>
              <input type="text" class="form-control" name="name" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Price *</label>
              <input type="number" class="form-control" name="price" step="0.01" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Stock Quantity *</label>
              <input type="number" class="form-control" name="stock" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Category</label>
              <select class="form-select" name="category">
                <option value="Rackets">Rackets</option>
                <option value="Shuttlecocks">Shuttlecocks</option>
                <option value="Apparel">Apparel</option>
                <option value="Shoes">Shoes</option>
                <option value="Accessories">Accessories</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Image URL</label>
              <input type="url" class="form-control" name="image" placeholder="https://example.com/image.jpg">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="addProduct()">Add Product</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Data stores
    let players = JSON.parse(localStorage.getItem('badmintonPlayers')) || [];
    let tournaments = JSON.parse(localStorage.getItem('badmintonTournaments')) || [];
    let payments = JSON.parse(localStorage.getItem('badmintonPayments')) || [];
    let products = JSON.parse(localStorage.getItem('ecommProducts')) || [];
    let orders = JSON.parse(localStorage.getItem('ecommOrders')) || [];

    function saveData() {
      localStorage.setItem('badmintonPlayers', JSON.stringify(players));
      localStorage.setItem('badmintonTournaments', JSON.stringify(tournaments));
      localStorage.setItem('badmintonPayments', JSON.stringify(payments));
      localStorage.setItem('ecommProducts', JSON.stringify(products));
      localStorage.setItem('ecommOrders', JSON.stringify(orders));
    }

    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
      event.target.classList.add('active');
      
      if (sectionId === 'dashboard') updateDashboard();
      else if (sectionId === 'products') renderProducts();
      else if (sectionId === 'orders') renderOrders();
      else if (sectionId === 'inventory') renderInventory();
      // ... other sections
    }

    function updateDashboard() {
      document.getElementById('totalPlayers').textContent = players.length;
      document.getElementById('pendingPayments').textContent = payments.filter(p => p.status === 'pending').length;
      document.getElementById('totalRevenue').textContent = `$${orders.reduce((sum, o) => sum + o.total, 0).toFixed(2)}`;
      document.getElementById('totalOrders').textContent = orders.length;
      document.getElementById('lowStock').textContent = products.filter(p => p.stock < 5).length;
      document.getElementById('activeTournaments').textContent = tournaments.length;
    }

    function addProduct() {
      const form = document.getElementById('productForm');
      const product = {
        id: Date.now().toString(),
        name: form.name.value,
        price: parseFloat(form.price.value),
        stock: parseInt(form.stock.value),
        category: form.category.value,
        image: form.image.value || 'https://via.placeholder.com/300x300/10b981/ffffff?text=No+Image',
        sold: 0,
        created: new Date().toISOString()
      };
      products.push(product);
      saveData();
      bootstrap.Modal.getInstance(document.getElementById('addProductModal')).hide();
      form.reset();
      renderProducts();
    }

    function renderProducts() {
      const tbody = document.getElementById('productsTable');
      if (!products.length) {
        tbody.innerHTML = '<tr><td colspan="7" class="text-center text-muted">No products</td></tr>';
        return;
      }
      tbody.innerHTML = products.map(p => `
        <tr>
          <td><img src="${p.image}" class="product-image" alt="${p.name}"></td>
          <td>${p.name}</td>
          <td>$${p.price.toFixed(2)}</td>
          <td><span class="badge ${p.stock < 5 ? 'bg-danger' : 'bg-success'}">${p.stock}</span></td>
          <td><span class="badge bg-info">${p.category}</span></td>
          <td>${p.sold}</td>
          <td>
            <button class="btn btn-sm btn-outline-primary" onclick="editProduct('${p.id}')">Edit</button>
            <button class="btn btn-sm btn-outline-danger ms-1" onclick="deleteProduct('${p.id}')">Delete</button>
          </td>
        </tr>
      `).join('');
    }

    function renderOrders() {
      const tbody = document.getElementById('ordersTable');
      if (!orders.length) {
        tbody.innerHTML = '<tr><td colspan="6" class="text-center text-muted">No orders</td></tr>';
        return;
      }
      tbody.innerHTML = orders.map(o => `
        <tr>
          <td>${o.id.slice(-8)}</td>
          <td>${o.customerName} (${o.email})</td>
          <td>$${o.total.toFixed(2)}</td>
          <td><span class="order-status status-${o.status}">${o.status}</span></td>
          <td>${new Date(o.date).toLocaleDateString()}</td>
          <td>
            <select onchange="updateOrderStatus('${o.id}', this.value)" class="form-select form-select-sm w-auto">
              <option value="pending" ${o.status === 'pending' ? 'selected' : ''}>Pending</option>
              <option value="processing" ${o.status === 'processing' ? 'selected' : ''}>Processing</option>
              <option value="shipped" ${o.status === 'shipped' ? 'selected' : ''}>Shipped</option>
              <option value="delivered" ${o.status === 'delivered' ? 'selected' : ''}>Delivered</option>
            </select>
          </td>
        </tr>
      `).join('');
    }

    function renderInventory() {
      const lowStock = products.filter(p => p.stock < 5);
      const container = document.getElementById('inventoryList');
      if (!lowStock.length) {
        container.innerHTML = `
          <div class="col-12">
            <div class="card">
              <div class="card-body text-center py-5">
                <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
                <p class="text-muted">All products have sufficient stock</p>
              </div>
            </div>
          </div>
        `;
        return;
      }
      container.innerHTML = lowStock.map(p => `
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="card border-left-danger">
            <div class="card-body">
              <div class="d-flex align-items-center">
                <img src="${p.image}" class="product-image me-3" alt="${p.name}">
                <div>
                  <h6 class="mb-1">${p.name}</h6>
                  <p class="mb-1">Stock: <strong>${p.stock}</strong></p>
                  <button class="btn btn-sm btn-warning" onclick="restock('${p.id}')">Restock</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    function updateOrderStatus(orderId, status) {
      const order = orders.find(o => o.id === orderId);
      if (order) {
        order.status = status;
        saveData();
        renderOrders();
        updateDashboard();
      }
    }

    function exportOrders() {
      const csv = ['ID,Customer,Email,Total,Status,Date\n'] + 
        orders.map(o => `"${o.id}","${o.customerName}","${o.email}","${o.total}","${o.status}","${new Date(o.date).toLocaleDateString()}"`).join('\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `orders_${new Date().toISOString().slice(0,10)}.csv`;
      a.click();
    }

    // Sample data for testing
    if (!products.length) {
      products = [
        {id: '1', name: 'Yonex Nanoray 800', price: 189.99, stock: 12, category: 'Rackets', image: 'https://via.placeholder.com/300x300/10b981/ffffff?text=Yonex', sold: 8},
        {id: '2', name: 'Victor Shuttlecocks', price: 24.99, stock: 3, category: 'Shuttlecocks', image: 'https://via.placeholder.com/300x300/ef4444/ffffff?text=Victor', sold: 45}
      ];
      orders = [
        {id: 'order1', customerName: 'John Doe', email: 'john@example.com', total: 214.98, status: 'processing', date: new Date().toISOString(), items: []}
      ];
      saveData();
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      showSection('dashboard');
    });
  </script>
</body>
</html>
